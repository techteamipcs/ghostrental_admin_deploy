"use strict";(self.webpackChunkghoastrental_dashboard=self.webpackChunkghoastrental_dashboard||[]).push([[6928],{6928:(K,f,s)=>{s.r(f),s.d(f,{CollectionCategoryModule:()=>z});var m=s(6895),d=s(8869),p=s(1454),t=s(4650),C=s(9059),Z=s(8601);function b(o,i){1&o&&(t.TgZ(0,"td",18)(1,"div",19),t._uU(2," Collection Category List is Empty "),t.qZA()())}function _(o,i){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const c=t.oxw().index;t.xp6(1),t.Oqu(c+1)}}function x(o,i){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const c=t.oxw().index,e=t.oxw();t.xp6(1),t.Oqu(c+1+(e.currentPage-1)*e.currentLimit)}}function A(o,i){if(1&o){const c=t.EpF();t.TgZ(0,"tr"),t.YNc(1,_,2,1,"td",20),t.YNc(2,x,2,1,"td",20),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td")(14,"a",21),t._UZ(15,"i",22),t.qZA(),t.TgZ(16,"a",23),t.NdJ("click",function(){const l=t.CHM(c).$implicit,a=t.oxw(),g=t.MAs(37);return t.KtG(a.open(g,l))}),t._UZ(17,"i",24),t.qZA()()()}if(2&o){const c=i.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.currentPage),t.xp6(1),t.Q6J("ngIf",1!=e.currentPage),t.xp6(2),t.Oqu(c.name),t.xp6(2),t.Oqu(1==c.status?"Enabled":"Disable"),t.xp6(2),t.Oqu(t.xi3(9,7,c.created_at,"dd/MM/YYYY HH:MM:a")),t.xp6(3),t.Oqu(t.xi3(12,10,c.updated_at,"dd/MM/YYYY HH:MM:a")),t.xp6(3),t.MGl("routerLink","/collection-category/edit/",c._id,"")}}function T(o,i){if(1&o){const c=t.EpF();t.TgZ(0,"div",25)(1,"app-pagination",26,27),t.NdJ("changePage",function(n){t.CHM(c);const l=t.oxw();return t.KtG(l.onListChangePage(n))}),t.qZA()()}if(2&o){const c=t.oxw();t.xp6(1),t.Q6J("initialPage",c.currentPage)("count",c.totalRecord)}}function y(o,i){if(1&o&&(t.TgZ(0,"p")(1,"strong"),t._uU(2,"Are you sure you want to delete "),t.TgZ(3,"span",35),t._uU(4),t.qZA(),t._uU(5," Collection?"),t.qZA()()),2&o){const c=t.oxw(2);t.xp6(4),t.hij('"',c.selectedCollection.name,'"')}}function U(o,i){if(1&o){const c=t.EpF();t.TgZ(0,"div",28)(1,"h4",29),t._uU(2,"Collection"),t.qZA(),t.TgZ(3,"button",30),t.NdJ("click",function(){const l=t.CHM(c).$implicit;return t.KtG(l.dismiss("Cross click"))}),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"div",31),t.YNc(6,y,6,1,"p",20),t.TgZ(7,"p"),t._uU(8," All information associated to this Collection will be permanently deleted. "),t.TgZ(9,"span",32),t._uU(10,"This operation can not be undone."),t.qZA()()(),t.TgZ(11,"div",33)(12,"button",34),t.NdJ("click",function(){const l=t.CHM(c).$implicit;return t.KtG(l.dismiss("cancel click"))}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",34),t.NdJ("click",function(){t.CHM(c);const n=t.oxw();return t.KtG(n.deleteCollection())}),t._uU(15,"Ok"),t.qZA()()}if(2&o){const c=t.oxw();t.xp6(6),t.Q6J("ngIf",c.selectedCollection)}}let h=(()=>{const i=class{constructor(e,n,l,a){this.router=e,this.collectionService=n,this.modalService=l,this.activeModal=a,this.msg_danger=!1,this.CollectionData=[],this.currentPage=1,this.initialized=!1,this.currentLimit=10,this.totalRecord=0,this.closeResult="",this.token=localStorage.getItem("ghoastrental-token")}ngOnInit(){this.get_CollectionData()}get_CollectionData(){this.collectionService.getCollectionCategoryDetails({limit:this.currentLimit,page:this.currentPage,token:this.token}).subscribe(n=>{200==n.code&&(null!=n.result&&""!=n.result?(this.CollectionData=n.result,this.totalRecord=n?.count):this.msg_danger=!0)})}deleteCollection(){if(this.selectedCollection){var e={id:this.selectedCollection._id};e.token=this.token,this.collectionService.deletecollectionCategory(e).subscribe(n=>{200==n.code&&(this.get_CollectionData(),this.modalService.dismissAll(),this.router.navigate(["/collection-category/view"]))})}}onListChangePage(e){this.currentPage=e,this.get_CollectionData()}open(e,n){this.selectedCollection=n,this.selectedCollection&&(this.modalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{this.closeResult=`Closed with: ${a}`},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`}))}getDismissReason(e){return e===p.If.ESC?"by pressing ESC":e===p.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}closeModal(){this.activeModal.close()}};let o=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(d.F0),t.Y36(C.c),t.Y36(p.FF),t.Y36(p.Kz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-collectioncat"]],decls:38,vars:3,consts:[[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"card-body"],[1,"col-md-12"],[1,"col-md-6"],["type","button","routerLink","/collection-category/add",1,"btn","btn-button","pull-right","ml-auto","mb-4"],[1,"title"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],["colspan","5",4,"ngIf"],[4,"ngFor","ngForOf"],["class","pcommece-pagination",4,"ngIf"],["style","z-index: 0;"],["content",""],["colspan","5"],[1,"alert","alert-dismissable",2,"text-align","center"],[4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],["aria-hidden","true",1,"mdi","mdi-lead-pencil"],[2,"cursor","pointer","padding-left","15px",3,"click"],["aria-hidden","true",1,"mdi","mdi-close-box"],[1,"pcommece-pagination"],[3,"initialPage","count","changePage"],["pagination",""],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-describedby","modal-title",1,"btn","btn-button",3,"click"],[1,"modal-body"],[1,"text-danger"],[1,"modal-footer"],["type","button",1,"btn","btn-button",3,"click"],[1,"text-primary"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Collection Category List"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",1),t._UZ(10,"div",8),t.TgZ(11,"div",8)(12,"button",9),t._uU(13,"Add Collection"),t.qZA()()(),t.TgZ(14,"div",8),t._UZ(15,"h4",10),t.qZA()(),t.TgZ(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),t._uU(21,"SL No"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Collection Name"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Status"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Created At"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Updated At"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,b,3,0,"td",13),t.YNc(34,A,18,13,"tr",14),t.qZA()(),t.YNc(35,T,3,2,"div",15),t.qZA()()()()(),t.YNc(36,U,16,1,"ng-template",16,17,t.W1O),t.qZA()),2&n&&(t.xp6(33),t.Q6J("ngIf",0==l.CollectionData.length),t.xp6(1),t.Q6J("ngForOf",l.CollectionData),t.xp6(1),t.Q6J("ngIf",l.totalRecord>0))},dependencies:[m.sg,m.O5,d.rH,Z.Q,m.uU],styles:[".pcommece-pagination{display:inline-block;width:100%;text-align:center}  .pcommece-pagination .pagination{justify-content:center;margin-top:1rem;align-items:center}  .btn-primary{color:#fff;background-color:#ff5e14;border-color:#ff5e14}  .title{font-size:30px}  .box-title{font-size:60px}  .cdis{display:flex;align-items:center;margin-bottom:15px}  .cdis button{margin-left:10px}  .modal-backdrop{position:inherit!important}    .modal-backdrop{z-index:0!important}"]}),o})();var u=s(5826),r=s(433),q=s(2340),S=s(6570);function k(o,i){1&o&&(t.TgZ(0,"span",22),t._uU(1,"Please Select Status"),t.qZA())}function w(o,i){1&o&&(t.TgZ(0,"span",22),t._uU(1,"Collection Name is required"),t.qZA())}function F(o,i){1&o&&(t.TgZ(0,"span",22),t._uU(1,"Url Key Title is required"),t.qZA())}let v=(()=>{const i=class{constructor(e,n,l,a,g){this.router=e,this.route=n,this.formBuilder=l,this.collectionService=a,this.toastr=g,this.submitted=!1,this.msg_success=!1,this.msg_danger=!1,this.isEdit="edit"===this.route.snapshot.data.title,this.dropdownSettings={},this.temp_sequence_number=0,this.submittedMedia=!1,this.hasError=(Q,V)=>this.addcollectionForm.controls[Q].hasError(V),this.addcollectionForm=this.formBuilder.group({name:["",r.kI.required],status:["",r.kI.required],url_key:["",r.kI.required]}),this.token=localStorage.getItem("ghoastrental-token"),this.url=q.N.Url+"/assets"}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.isEdit?(this.patchingdata(this.id),this.applyAction="Update"):this.applyAction="Add",this.dropdownSettings={singleSelection:!1,idField:"_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:6,allowSearchFilter:!0}}onItemSelect(e){console.log(e)}onSelectAll(e){console.log(e)}selectCollection(e){console.log(e)}get f(){return this.addcollectionForm.controls}patchingdata(e){this.collectionService.getCollectionCategoryWithId({id:e}).subscribe(l=>{if(200==l.code&&l?.result.length>0){let a=l?.result[0];this.collectionData=l?.result[0],this.addcollectionForm.patchValue({name:a?.name,status:a?.status,url_key:a?.url_key,isApproved:a?.isApproved})}})}onSubmit(){this.submitted=!0;let e=this.addcollectionForm.value,n=this.id;e.token=this.token;let l=[];this.addcollectionForm.value.categories&&this.addcollectionForm.value.categories.length>0&&this.addcollectionForm.value.categories.forEach(a=>{l.push({category_id:a._id,category_name:a.name})}),e.categories=l,!this.addcollectionForm.invalid&&(this.isEdit?this.collectionService.editCollectionCategorydata(e,n).subscribe(a=>{200==a.code?(this.throw_msg=a.message,this.msg_success=!0,this.toastr.successToastr(a.message),setTimeout(()=>{this.router.navigate(["/collection-category/view"])},2e3)):(this.throw_msg=a.message,this.msg_danger=!0,this.toastr.errorToastr(a.message))}):this.collectionService.addCollectionCategory(e).subscribe(a=>{200==a.code?(this.toastr.successToastr(a.message),this.throw_msg=a.message,this.msg_success=!0,setTimeout(()=>{this.router.navigate(["/collection-category/view"])},2e3)):(this.throw_msg=a.message,this.msg_danger=!0,this.toastr.errorToastr(a.message))}))}onCancel(){this.router.navigate(["/collection-category/view"])}};let o=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(r.qu),t.Y36(C.c),t.Y36(S.eP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-collectioncat"]],decls:37,vars:4,consts:[[1,"container","mt--7"],[1,"row"],[1,"col-xl-12","order-xl-1"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"col-md-8","col-sm-10","col-12"],[1,"mb-0"],[1,"card-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["name","status","formControlName","status",1,"form-control"],["value",""],["value","true"],["value","false"],["class","alert-danger",4,"ngIf"],["type","text","name","name","autocomplete","off","formControlName","name","placeholder","Collection Name",1,"form-control"],["type","text","name","url_key","autocomplete","off","formControlName","url_key","placeholder","Url Key",1,"form-control"],[1,"box-footer","d-flex"],["type","submit",1,"btn","btn-button","mr-2"],["type","cancel",1,"btn","btn-button",3,"click"],[1,"alert-danger"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),t._uU(8,"Edit Collection Category"),t.qZA()()()(),t.TgZ(9,"div",8)(10,"form",9),t.NdJ("ngSubmit",function(){return l.onSubmit()}),t.TgZ(11,"div",10)(12,"label",11),t._uU(13,"Select Status"),t.qZA(),t.TgZ(14,"select",12)(15,"option",13),t._uU(16,"Select Status"),t.qZA(),t.TgZ(17,"option",14),t._uU(18,"Active"),t.qZA(),t.TgZ(19,"option",15),t._uU(20,"Deactive"),t.qZA()(),t.YNc(21,k,2,0,"span",16),t.qZA(),t.TgZ(22,"div",10)(23,"label",11),t._uU(24,"Name"),t.qZA(),t._UZ(25,"input",17),t.YNc(26,w,2,0,"span",16),t.qZA(),t.TgZ(27,"div",10)(28,"label",11),t._uU(29,"Url Key"),t.qZA(),t._UZ(30,"input",18),t.YNc(31,F,2,0,"span",16),t.qZA(),t.TgZ(32,"div",19)(33,"button",20),t._uU(34,"Submit"),t.qZA(),t.TgZ(35,"button",21),t.NdJ("click",function(){return l.onCancel()}),t._uU(36,"Cancel"),t.qZA()()()()()()()()),2&n&&(t.xp6(10),t.Q6J("formGroup",l.addcollectionForm),t.xp6(11),t.Q6J("ngIf",l.submitted&&l.hasError("status","required")),t.xp6(5),t.Q6J("ngIf",l.submitted&&l.hasError("name","required")),t.xp6(5),t.Q6J("ngIf",l.submitted&&l.hasError("url_key","required")))},dependencies:[m.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".pcommece-pagination{display:inline-block;width:100%;text-align:center}  .pcommece-pagination .pagination{justify-content:center;margin-top:1rem;align-items:center}  .btn-primary{color:#fff;background-color:#ff5e14;border-color:#ff5e14}  .title{font-size:30px}  .box-title{font-size:60px}  .cdis{display:flex;align-items:center;margin-bottom:15px}  .cdis button{margin-left:10px}  .modal-backdrop{position:inherit!important}    .modal-backdrop{z-index:0!important}"]}),o})();const Y=[{path:"",component:h,canActivate:[u.a]},{path:"add",component:v,canActivate:[u.a],data:{title:"add"}},{path:"view",component:h,canActivate:[u.a]},{path:"edit/:id",component:v,canActivate:[u.a],data:{title:"edit"}},{path:"**",component:h,canActivate:[u.a]}];let N=(()=>{const i=class{};let o=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(Y),d.Bz]}),o})();var I=s(9207),J=s(529),M=s(6913),E=s(2257),P=s(6849),D=s(3056),L=s(1310),O=s(3447);let z=(()=>{const i=class{};let o=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,N,I.UM,J.JF,r.u5,r.UX,M.TA,P.BlogModule,E.PageModule,O.Iq,D.ZQ,L.j]}),o})()}}]);