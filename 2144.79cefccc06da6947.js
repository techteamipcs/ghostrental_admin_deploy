"use strict";(self.webpackChunkghoastrental_dashboard=self.webpackChunkghoastrental_dashboard||[]).push([[2144],{2144:(A,h,p)=>{p.r(h),p.d(h,{AuthLayoutModule:()=>q});var m=p(6895),d=p(8869),n=p(433),t=p(4650),u=p(262),f=p(529),g=p(2843),c=p(2340);let v=(()=>{const e=class{constructor(i){this.http=i,this.validateLogin=r=>this.http.post(c.N.baseUrl+"/api/users/login",r,{observe:"response"}).pipe((0,u.K)(a=>(0,g._)(a))),this.updateProfile=r=>this.http.post(c.N.baseUrl+"/api/users/updateprofile",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.editProfile=r=>this.http.post(c.N.baseUrl+"/api/users/edituserprofile",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.createrofile=r=>this.http.post(c.N.baseUrl+"/api/users/registerUser",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.getUser=r=>this.http.post(c.N.baseUrl+"/api/users/getuserwithid",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.getallusers=r=>this.http.post(c.N.baseUrl+"/api/users/adminuserview",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.deleteuser=r=>this.http.post(c.N.baseUrl+"/api/users/deleteuser",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a))),this.forgotPassword=r=>this.http.post(c.N.baseUrl+"/api/users/forgotcustomerpasswordlink",r).pipe((0,u.K)(a=>(0,g._)(a))),this.ChangePassword=r=>this.http.post(c.N.baseUrl+"/api/users/updateforgotpassword",r,this.getRequestHeaders()).pipe((0,u.K)(a=>(0,g._)(a)))}getRequestHeaders(){let i;const r=localStorage.getItem("ghoastrental-token");return i=new f.WM({Authorization:`Bearer ${r}`}),{headers:i}}};let o=e;return e.\u0275fac=function(r){return new(r||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),o})();function b(o,e){if(1&o&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&o){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.loginErrorMsg," ")}}function Z(o,e){if(1&o&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&o){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.showmsg," ")}}function x(o,e){if(1&o){const l=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),t._uU(6,"Forgot Password"),t.qZA(),t.TgZ(7,"form",7),t.NdJ("ngSubmit",function(){t.CHM(l);const r=t.oxw();return t.KtG(r.onSubmit())}),t.TgZ(8,"div",8)(9,"label"),t._uU(10,"Email *"),t.qZA(),t._UZ(11,"input",9),t.qZA(),t.YNc(12,b,2,1,"div",10),t.YNc(13,Z,2,1,"div",11),t.TgZ(14,"div",12)(15,"button",13),t._uU(16,"Submit"),t.qZA()(),t.TgZ(17,"p",14),t._uU(18,"Do have an Account?"),t.TgZ(19,"a",15),t._uU(20," Sign in"),t.qZA()()()()()()()()}if(2&o){const l=t.oxw();t.xp6(7),t.Q6J("formGroup",l.forgotpassForm),t.xp6(5),t.Q6J("ngIf",l.loginError2),t.xp6(1),t.Q6J("ngIf",l.showmsg)}}function T(o,e){if(1&o&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&o){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.loginErrorMsg," ")}}function _(o,e){if(1&o&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&o){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.showmsg," ")}}function U(o,e){if(1&o){const l=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),t._uU(6,"Change Password"),t.qZA(),t.TgZ(7,"form",7),t.NdJ("ngSubmit",function(){t.CHM(l);const r=t.oxw();return t.KtG(r.onSubmitActive())}),t.TgZ(8,"div",8)(9,"label"),t._uU(10,"Password *"),t.qZA(),t._UZ(11,"input",18),t.qZA(),t.TgZ(12,"div",8)(13,"label"),t._uU(14,"Confirm Password *"),t.qZA(),t._UZ(15,"input",19),t.qZA(),t.YNc(16,T,2,1,"div",10),t.YNc(17,_,2,1,"div",11),t.TgZ(18,"div",12)(19,"button",13),t._uU(20,"Submit"),t.qZA()(),t.TgZ(21,"p",14),t._uU(22,"Do have an Account?"),t.TgZ(23,"a",15),t._uU(24," Sign in"),t.qZA()()()()()()()()}if(2&o){const l=t.oxw();t.xp6(7),t.Q6J("formGroup",l.activateForm),t.xp6(9),t.Q6J("ngIf",l.loginError2),t.xp6(1),t.Q6J("ngIf",l.showmsg)}}let w=(()=>{const e=class{constructor(i,r,s,a){this.formBuilder=i,this.router=r,this.route=s,this.loginService=a,this.showmsg="",this.loginErrorMsg="",this.loginError2=!1,this.error={errorTitle:"",errorDesc:""},this.forgotpassForm=this.formBuilder.group({email:["",n.kI.required]}),this.activateForm=this.formBuilder.group({password:["",n.kI.required],confirm_password:["",n.kI.required]})}ngOnInit(){this.link=this.route.snapshot.paramMap.get("link"),this.link?this.activateForm=this.formBuilder.group({password:["",n.kI.required],confirm_password:["",n.kI.required]}):setTimeout(()=>{this.forgotpassForm=this.formBuilder.group({email:["",n.kI.required]})},1e3)}onSubmit(){if(this.forgotpassForm.invalid)return this.loginError2=!0,this.loginErrorMsg="Please Enter Valid Email",void setTimeout(()=>{this.loginError2=!1},2e3);this.loginService.forgotPassword(this.forgotpassForm.value).subscribe(r=>{200==r.code?(this.showmsg="Please check your email!",this.forgotpassForm.reset()):400==r.code&&(this.loginError2=!0,this.loginErrorMsg="Wrong Authentication",setTimeout(()=>{this.loginError2=!1},2e3))})}onSubmitActive(){if(this.activateForm.invalid)return this.loginError2=!0,this.loginErrorMsg="Please Enter Valid Password",void setTimeout(()=>{this.loginError2=!1},2e3);if(this.activateForm.value.password!=this.activateForm.value.confirm_password)return this.loginError2=!0,this.loginErrorMsg="Please Enter Same Password",void setTimeout(()=>{this.loginError2=!1},2e3);let i=this.activateForm.value;i.forgotLink=this.link,this.loginService.ChangePassword(i).subscribe(r=>{200==r.code?(this.showmsg="Your Password has been changed successfully. kindly login and verify the new Password",this.activateForm.reset()):400==r.code&&(this.loginError2=!0,this.loginErrorMsg="Wrong Authentication",setTimeout(()=>{this.loginError2=!1},2e3))})}};let o=e;return e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(d.F0),t.Y36(d.gz),t.Y36(v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-forgot"]],decls:2,vars:2,consts:[["class","container-fluid page-body-wrapper full-page-wrapper",4,"ngIf"],[1,"container-fluid","page-body-wrapper","full-page-wrapper"],[1,"row","w-100","m-0"],[1,"content-wrapper","full-page-wrapper","d-flex","align-items-center","auth","login-bg"],[1,"card","col-lg-4","mx-auto"],[1,"card-body","px-5","py-5"],[1,"card-title","text-left","mb-3"],[1,"login100-form","validate-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","placeholder","Email","type","email","name","email","formControlName","email",1,"form-control","p_input"],["class","form-group alert alert-danger",4,"ngIf"],["class","form-group alert alert-success",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-button","btn-block","enter-btn"],[1,"sign-up"],["href","#"],[1,"form-group","alert","alert-danger"],[1,"form-group","alert","alert-success"],["type","text","placeholder","Password","type","password","name","password","formControlName","password",1,"form-control","p_input"],["type","text","placeholder","Confirm Password","type","password","name","confirm_password","formControlName","confirm_password",1,"form-control","p_input"]],template:function(r,s){1&r&&(t.YNc(0,x,21,3,"div",0),t.YNc(1,U,25,3,"div",0)),2&r&&(t.Q6J("ngIf",!s.link),t.xp6(1),t.Q6J("ngIf",s.link))},dependencies:[m.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]}),o})();function E(o,e){if(1&o&&(t.TgZ(0,"div",21),t._uU(1),t.qZA()),2&o){const l=t.oxw();t.xp6(1),t.hij(" ",l.loginErrorMsg," ")}}const F=[{path:"login",component:(()=>{const e=class{constructor(i,r,s,a){this.formBuilder=i,this.router=r,this.route=s,this.loginService=a,this.loginErrorMsg="",this.loginError2=!1,this.error={errorTitle:"",errorDesc:""},this.loginForm=this.formBuilder.group({email:["",n.kI.required],password:["",n.kI.required]})}ngOnInit(){setTimeout(()=>{this.loginForm=this.formBuilder.group({email:["",n.kI.required],password:["",n.kI.required]})},1e3)}onSubmit(){if(this.loginForm.invalid)return this.loginError2=!0,this.loginErrorMsg="Please Enter Valid Credentials",void setTimeout(()=>{this.loginError2=!1},2e3);this.loginService.validateLogin(this.loginForm.value).subscribe(i=>{200==i.body.code?(localStorage.setItem("ghoastrental-token",i.body.token),localStorage.setItem("user",JSON.stringify(i.body)),this.router.navigateByUrl("/",{skipLocationChange:!1}).then(()=>{window.location.reload()})):400==i.body.code&&(this.loginError2=!0,this.loginErrorMsg="Wrong Authentication",setTimeout(()=>{this.loginError2=!1},2e3))})}};let o=e;return e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(d.F0),t.Y36(d.gz),t.Y36(v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:32,vars:2,consts:[[1,"container-fluid","page-body-wrapper","full-page-wrapper"],[1,"row","w-100","m-0"],[1,"content-wrapper","full-page-wrapper","d-flex","align-items-center","auth","login-bg"],[1,"card","col-lg-4","mx-auto"],[1,"card-body","px-5","py-5"],[1,"card-title","text-left","mb-3"],[1,"login100-form","validate-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","placeholder","Email","type","email","name","email","formControlName","email",1,"form-control","p_input"],["type","text","placeholder","Password","type","password","name","password","formControlName","password",1,"form-control","p_input"],[1,"form-group","d-flex","align-items-center","justify-content-between"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input"],[1,"input-helper"],["href","/#/forgot-password",1,"forgot-pass"],["class","form-group alert alert-danger",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-button","btn-block","enter-btn"],[1,"sign-up"],["href","#"],[1,"form-group","alert","alert-danger"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Login"),t.qZA(),t.TgZ(7,"form",6),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(8,"div",7)(9,"label"),t._uU(10,"Username or email *"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",7)(13,"label"),t._uU(14,"Password *"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",10)(17,"div",11)(18,"label",12),t._UZ(19,"input",13),t._uU(20," Remember me "),t._UZ(21,"i",14),t.qZA()(),t.TgZ(22,"a",15),t._uU(23,"Forgot password"),t.qZA()(),t.YNc(24,E,2,1,"div",16),t.TgZ(25,"div",17)(26,"button",18),t._uU(27,"Login"),t.qZA()(),t.TgZ(28,"p",19),t._uU(29,"Don't have an Account?"),t.TgZ(30,"a",20),t._uU(31," Sign Up"),t.qZA()()()()()()()()),2&r&&(t.xp6(7),t.Q6J("formGroup",s.loginForm),t.xp6(17),t.Q6J("ngIf",s.loginError2))},dependencies:[m.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]}),o})()},{path:"register",component:(()=>{const e=class{};let o=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:2,vars:0,template:function(r,s){1&r&&(t.TgZ(0,"p"),t._uU(1,"register works!"),t.qZA())}}),o})()},{path:"forgot-password",component:w},{path:"forgot-password/:link",component:w}];let y=(()=>{const e=class{};let o=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(F),d.Bz]}),o})(),q=(()=>{const e=class{};let o=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,n.u5,n.UX,y]}),o})()}}]);