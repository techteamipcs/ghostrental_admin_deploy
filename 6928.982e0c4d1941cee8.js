"use strict";(self.webpackChunkghoastrental_dashboard=self.webpackChunkghoastrental_dashboard||[]).push([[6928],{6928:(K,f,c)=>{c.r(f),c.d(f,{CollectionCategoryModule:()=>P});var m=c(6895),d=c(8869),p=c(1454),t=c(4650),v=c(9059),b=c(8601);function Z(n,o){1&n&&(t.TgZ(0,"td",18)(1,"div",19),t._uU(2," Collection Category List is Empty "),t.qZA()())}function A(n,o){if(1&n){const s=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td")(14,"a",20),t._UZ(15,"i",21),t.qZA(),t.TgZ(16,"a",22),t.NdJ("click",function(){const l=t.CHM(s).$implicit,a=t.oxw(),g=t.MAs(37);return t.KtG(a.open(g,l))}),t._UZ(17,"i",23),t.qZA()()()}if(2&n){const s=o.$implicit,e=o.index;t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(s.name),t.xp6(2),t.Oqu(1==s.status?"Enabled":"Disable"),t.xp6(2),t.Oqu(t.xi3(9,6,s.created_at,"dd/MM/YYYY HH:MM:a")),t.xp6(3),t.Oqu(t.xi3(12,9,s.updated_at,"dd/MM/YYYY HH:MM:a")),t.xp6(3),t.MGl("routerLink","/collection-category/edit/",s._id,"")}}function _(n,o){if(1&n){const s=t.EpF();t.TgZ(0,"div",24)(1,"app-pagination",25,26),t.NdJ("changePage",function(i){t.CHM(s);const l=t.oxw();return t.KtG(l.onListChangePage(i))}),t.qZA()()}if(2&n){const s=t.oxw();t.xp6(1),t.Q6J("initialPage",s.currentPage)("count",s.totalRecord)}}function T(n,o){if(1&n&&(t.TgZ(0,"p")(1,"strong"),t._uU(2,"Are you sure you want to delete "),t.TgZ(3,"span",35),t._uU(4),t.qZA(),t._uU(5," Collection?"),t.qZA()()),2&n){const s=t.oxw(2);t.xp6(4),t.hij('"',s.selectedCollection.name,'"')}}function x(n,o){if(1&n){const s=t.EpF();t.TgZ(0,"div",27)(1,"h4",28),t._uU(2,"Collection"),t.qZA(),t.TgZ(3,"button",29),t.NdJ("click",function(){const l=t.CHM(s).$implicit;return t.KtG(l.dismiss("Cross click"))}),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"div",30),t.YNc(6,T,6,1,"p",31),t.TgZ(7,"p"),t._uU(8," All information associated to this Collection will be permanently deleted. "),t.TgZ(9,"span",32),t._uU(10,"This operation can not be undone."),t.qZA()()(),t.TgZ(11,"div",33)(12,"button",34),t.NdJ("click",function(){const l=t.CHM(s).$implicit;return t.KtG(l.dismiss("cancel click"))}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",34),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.deleteCollection())}),t._uU(15,"Ok"),t.qZA()()}if(2&n){const s=t.oxw();t.xp6(6),t.Q6J("ngIf",s.selectedCollection)}}let h=(()=>{const o=class{constructor(e,i,l,a){this.router=e,this.collectionService=i,this.modalService=l,this.activeModal=a,this.msg_danger=!1,this.CollectionData=[],this.currentPage=1,this.initialized=!1,this.currentLimit=10,this.totalRecord=0,this.closeResult="",this.token=localStorage.getItem("ghoastrental-token")}ngOnInit(){this.get_CollectionData()}get_CollectionData(){this.collectionService.getCollectionCategoryDetails({limit:this.currentLimit,page:this.currentPage,token:this.token}).subscribe(i=>{200==i.code&&(null!=i.result&&""!=i.result?(this.CollectionData=i.result,this.totalRecord=i?.count):this.msg_danger=!0)})}deleteCollection(){if(this.selectedCollection){var e={id:this.selectedCollection._id};e.token=this.token,this.collectionService.deletecollectionCategory(e).subscribe(i=>{200==i.code&&(this.get_CollectionData(),this.modalService.dismissAll(),this.router.navigate(["/collection-category/view"]))})}}onListChangePage(e){this.currentPage=e,this.get_CollectionData()}open(e,i){this.selectedCollection=i,this.selectedCollection&&(this.modalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{this.closeResult=`Closed with: ${a}`},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`}))}getDismissReason(e){return e===p.If.ESC?"by pressing ESC":e===p.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}closeModal(){this.activeModal.close()}};let n=o;return o.\u0275fac=function(i){return new(i||o)(t.Y36(d.F0),t.Y36(v.c),t.Y36(p.FF),t.Y36(p.Kz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-collectioncat"]],decls:38,vars:3,consts:[[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"card-body"],[1,"col-md-12"],[1,"col-md-6"],["type","button","routerLink","/collection-category/add",1,"btn","btn-button","pull-right","ml-auto","mb-4"],[1,"title"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],["colspan","5",4,"ngIf"],[4,"ngFor","ngForOf"],["class","pcommece-pagination",4,"ngIf"],["style","z-index: 0;"],["content",""],["colspan","5"],[1,"alert","alert-dismissable",2,"text-align","center"],[2,"cursor","pointer",3,"routerLink"],["aria-hidden","true",1,"mdi","mdi-lead-pencil"],[2,"cursor","pointer","padding-left","15px",3,"click"],["aria-hidden","true",1,"mdi","mdi-close-box"],[1,"pcommece-pagination"],[3,"initialPage","count","changePage"],["pagination",""],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-describedby","modal-title",1,"btn","btn-button",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"text-danger"],[1,"modal-footer"],["type","button",1,"btn","btn-button",3,"click"],[1,"text-primary"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Collection Category List"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",1),t._UZ(10,"div",8),t.TgZ(11,"div",8)(12,"button",9),t._uU(13,"Add Collection"),t.qZA()()(),t.TgZ(14,"div",8),t._UZ(15,"h4",10),t.qZA()(),t.TgZ(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),t._uU(21,"SL No"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Collection Name"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Status"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Created At"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Updated At"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,Z,3,0,"td",13),t.YNc(34,A,18,12,"tr",14),t.qZA()(),t.YNc(35,_,3,2,"div",15),t.qZA()()()()(),t.YNc(36,x,16,1,"ng-template",16,17,t.W1O),t.qZA()),2&i&&(t.xp6(33),t.Q6J("ngIf",0==l.CollectionData.length),t.xp6(1),t.Q6J("ngForOf",l.CollectionData),t.xp6(1),t.Q6J("ngIf",l.totalRecord>0))},dependencies:[m.sg,m.O5,d.rH,b.Q,m.uU],styles:[".pcommece-pagination{display:inline-block;width:100%;text-align:center}  .pcommece-pagination .pagination{justify-content:center;margin-top:1rem;align-items:center}  .btn-primary{color:#fff;background-color:#ff5e14;border-color:#ff5e14}  .title{font-size:30px}  .box-title{font-size:60px}  .cdis{display:flex;align-items:center;margin-bottom:15px}  .cdis button{margin-left:10px}  .modal-backdrop{position:inherit!important}    .modal-backdrop{z-index:0!important}"]}),n})();var u=c(5826),r=c(433),y=c(2340),U=c(6570);function q(n,o){1&n&&(t.TgZ(0,"span",22),t._uU(1,"Please Select Status"),t.qZA())}function S(n,o){1&n&&(t.TgZ(0,"span",22),t._uU(1,"Collection Name is required"),t.qZA())}function k(n,o){1&n&&(t.TgZ(0,"span",22),t._uU(1,"Url Key Title is required"),t.qZA())}let C=(()=>{const o=class{constructor(e,i,l,a,g){this.router=e,this.route=i,this.formBuilder=l,this.collectionService=a,this.toastr=g,this.submitted=!1,this.msg_success=!1,this.msg_danger=!1,this.isEdit="edit"===this.route.snapshot.data.title,this.dropdownSettings={},this.temp_sequence_number=0,this.submittedMedia=!1,this.hasError=(O,z)=>this.addcollectionForm.controls[O].hasError(z),this.addcollectionForm=this.formBuilder.group({name:["",r.kI.required],status:["",r.kI.required],url_key:["",r.kI.required]}),this.token=localStorage.getItem("ghoastrental-token"),this.url=y.N.Url+"/assets"}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.isEdit?(this.patchingdata(this.id),this.applyAction="Update"):this.applyAction="Add",this.dropdownSettings={singleSelection:!1,idField:"_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:6,allowSearchFilter:!0}}onItemSelect(e){console.log(e)}onSelectAll(e){console.log(e)}selectCollection(e){console.log(e)}get f(){return this.addcollectionForm.controls}patchingdata(e){this.collectionService.getCollectionCategoryWithId({id:e}).subscribe(l=>{if(200==l.code&&l?.result.length>0){let a=l?.result[0];this.collectionData=l?.result[0],this.addcollectionForm.patchValue({name:a?.name,status:a?.status,url_key:a?.url_key,isApproved:a?.isApproved})}})}onSubmit(){this.submitted=!0;let e=this.addcollectionForm.value,i=this.id;e.token=this.token;let l=[];this.addcollectionForm.value.categories&&this.addcollectionForm.value.categories.length>0&&this.addcollectionForm.value.categories.forEach(a=>{l.push({category_id:a._id,category_name:a.name})}),e.categories=l,!this.addcollectionForm.invalid&&(this.isEdit?this.collectionService.editCollectionCategorydata(e,i).subscribe(a=>{200==a.code?(this.throw_msg=a.message,this.msg_success=!0,this.toastr.successToastr(a.message),setTimeout(()=>{this.router.navigate(["/collection-category/view"])},2e3)):(this.throw_msg=a.message,this.msg_danger=!0,this.toastr.errorToastr(a.message))}):this.collectionService.addCollectionCategory(e).subscribe(a=>{200==a.code?(this.toastr.successToastr(a.message),this.throw_msg=a.message,this.msg_success=!0,setTimeout(()=>{this.router.navigate(["/collection-category/view"])},2e3)):(this.throw_msg=a.message,this.msg_danger=!0,this.toastr.errorToastr(a.message))}))}onCancel(){this.router.navigate(["/collection-category/view"])}};let n=o;return o.\u0275fac=function(i){return new(i||o)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(r.qu),t.Y36(v.c),t.Y36(U.eP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-collectioncat"]],decls:37,vars:4,consts:[[1,"container","mt--7"],[1,"row"],[1,"col-xl-12","order-xl-1"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"col-md-8","col-sm-10","col-12"],[1,"mb-0"],[1,"card-body"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["name","status","formControlName","status",1,"form-control"],["value",""],["value","true"],["value","false"],["class","alert-danger",4,"ngIf"],["type","text","name","name","autocomplete","off","formControlName","name","placeholder","Collection Name",1,"form-control"],["type","text","name","url_key","autocomplete","off","formControlName","url_key","placeholder","Url Key",1,"form-control"],[1,"box-footer","d-flex"],["type","submit",1,"btn","btn-button","mr-2"],["type","cancel",1,"btn","btn-button",3,"click"],[1,"alert-danger"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),t._uU(8,"Edit Collection Category"),t.qZA()()()(),t.TgZ(9,"div",8)(10,"form",9),t.NdJ("ngSubmit",function(){return l.onSubmit()}),t.TgZ(11,"div",10)(12,"label",11),t._uU(13,"Select Status"),t.qZA(),t.TgZ(14,"select",12)(15,"option",13),t._uU(16,"Select Status"),t.qZA(),t.TgZ(17,"option",14),t._uU(18,"Active"),t.qZA(),t.TgZ(19,"option",15),t._uU(20,"Deactive"),t.qZA()(),t.YNc(21,q,2,0,"span",16),t.qZA(),t.TgZ(22,"div",10)(23,"label",11),t._uU(24,"Name"),t.qZA(),t._UZ(25,"input",17),t.YNc(26,S,2,0,"span",16),t.qZA(),t.TgZ(27,"div",10)(28,"label",11),t._uU(29,"Url Key"),t.qZA(),t._UZ(30,"input",18),t.YNc(31,k,2,0,"span",16),t.qZA(),t.TgZ(32,"div",19)(33,"button",20),t._uU(34,"Submit"),t.qZA(),t.TgZ(35,"button",21),t.NdJ("click",function(){return l.onCancel()}),t._uU(36,"Cancel"),t.qZA()()()()()()()()),2&i&&(t.xp6(10),t.Q6J("formGroup",l.addcollectionForm),t.xp6(11),t.Q6J("ngIf",l.submitted&&l.hasError("status","required")),t.xp6(5),t.Q6J("ngIf",l.submitted&&l.hasError("name","required")),t.xp6(5),t.Q6J("ngIf",l.submitted&&l.hasError("url_key","required")))},dependencies:[m.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".pcommece-pagination{display:inline-block;width:100%;text-align:center}  .pcommece-pagination .pagination{justify-content:center;margin-top:1rem;align-items:center}  .btn-primary{color:#fff;background-color:#ff5e14;border-color:#ff5e14}  .title{font-size:30px}  .box-title{font-size:60px}  .cdis{display:flex;align-items:center;margin-bottom:15px}  .cdis button{margin-left:10px}  .modal-backdrop{position:inherit!important}    .modal-backdrop{z-index:0!important}"]}),n})();const w=[{path:"",component:h,canActivate:[u.a]},{path:"add",component:C,canActivate:[u.a],data:{title:"add"}},{path:"view",component:h,canActivate:[u.a]},{path:"edit/:id",component:C,canActivate:[u.a],data:{title:"edit"}},{path:"**",component:h,canActivate:[u.a]}];let F=(()=>{const o=class{};let n=o;return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(w),d.Bz]}),n})();var Y=c(9207),N=c(529),I=c(6913),J=c(2257),M=c(6849),E=c(3056),D=c(1310),L=c(3447);let P=(()=>{const o=class{};let n=o;return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,F,Y.UM,N.JF,r.u5,r.UX,I.TA,M.BlogModule,J.PageModule,L.Iq,E.ZQ,D.j]}),n})()}}]);